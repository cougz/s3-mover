volumes:
  data:

services:
  s3-mover:
    image: ghcr.io/cougz/s3-mover:latest
    restart: unless-stopped
    environment:
      S3_ENDPOINT:         "${S3_ENDPOINT}"
      S3_ACCESS_KEY:       "${S3_ACCESS_KEY}"
      S3_SECRET_KEY:       "${S3_SECRET_KEY}"
      S3_BUCKET:           "${S3_BUCKET}"
      S3_DESTINATION:      "speedtest-results"
      SOURCE_PATH:         "/data"
      FILE_PATTERN:        "*.json"
      DELETE_AFTER_UPLOAD: "true"
      MODE:                "watch"
    volumes:
      - data:/data
